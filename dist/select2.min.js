angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout","$sniffer",function(a,b,c){var d={};return a&&angular.extend(d,a),{require:"ngModel",priority:1,compile:function(a,e){var f,g,h,i=a.is("select"),j=angular.isDefined(e.multiple);return a.is("select")&&(g=a.find("option[ng-repeat], option[data-ng-repeat]"),g.length&&(h=g.attr("ng-repeat")||g.attr("data-ng-repeat"),f=jQuery.trim(h.split("|")[0]).split(" ").pop())),function(a,g,h,k){var l=angular.extend({},d,a.$eval(h.uiSelect2)),m=function(a){var b;return l.simple_tags?(b=[],angular.forEach(a,function(a){b.push(a.id)})):b=a,b},n=function(a){var b=[];return a?(l.simple_tags?(b=[],angular.forEach(a,function(a){b.push({id:a,text:a})})):b=a,b):b};if(i?(delete l.multiple,delete l.initSelection):j&&(l.multiple=!0),k&&(a.$watch(e.ngModel,function(a,b){a&&a!==b&&k.$render()},!0),k.$render=function(){if(i)g.select2("val",k.$viewValue);else if(l.multiple){var a=k.$viewValue;angular.isString(a)&&(a=a.split(",")),g.select2("data",n(a))}else angular.isObject(k.$viewValue)?g.select2("data",k.$viewValue):k.$viewValue?g.select2("val",k.$viewValue):g.select2("data",null)},f&&a.$watch(f,function(a,c){angular.equals(a,c)||b(function(){g.select2("val",k.$viewValue),g.trigger("change"),a&&!c&&k.$setPristine&&k.$setPristine(!0)})}),k.$parsers.push(function(a){var b=g.prev();return b.toggleClass("ng-invalid",!k.$valid).toggleClass("ng-valid",k.$valid).toggleClass("ng-invalid-required",!k.$valid).toggleClass("ng-valid-required",k.$valid).toggleClass("ng-dirty",k.$dirty).toggleClass("ng-pristine",k.$pristine),a}),!i&&(c.hasEvent("input")||g.unbind("change"),g.bind("change",function(b){b.stopImmediatePropagation(),a.$$phase||a.$root.$$phase||a.$apply(function(){k.$setViewValue(m(g.select2("data")))})}),l.initSelection))){var o=l.initSelection;l.initSelection=function(a,b){o(a,function(a){k.$setViewValue(m(a)),b(a)})}}g.bind("$destroy",function(){g.select2("destroy")}),h.$observe("disabled",function(a){g.select2("enable",!a)}),h.$observe("readonly",function(a){g.select2("readonly",!!a)}),h.ngMultiple&&a.$watch(h.ngMultiple,function(){g.select2(l)}),b(function(){g.select2(l),g.val(k.$viewValue),k.$render(),l.initSelection||i||k.$setViewValue(m(g.select2("data")))})}}}}]);